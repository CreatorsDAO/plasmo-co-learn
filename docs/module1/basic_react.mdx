---
sidebar_position: 5
---

# 10 åˆ†é’Ÿ React

:::tip
æµè§ˆå™¨æ‰©å±•æ˜¯ä¸€ä¸ªå‰ç«¯å¯†é›†å‹é¡¹ç›®ã€‚
æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œå¸Œæœ›ä½ äº†è§£ä¸€äº›ç®€å•çš„ `React` ç›¸å…³çŸ¥è¯†ã€‚
è¿™ä¸ªæé€Ÿæ•™ç¨‹æ˜¯ä½œè€…è‡ªå·±æ”¶é›†æ•´ç†çš„ï¼Œä¸èƒ½è®©ä½ æˆä¸ºå‰ç«¯ä¸“å®¶ï¼Œåªæ˜¯è®©ä½ å¯¹ React çš„ç›¸å…³æ¦‚å¿µæœ‰æ‰€äº†è§£ã€‚

åŒæ—¶ï¼Œå¯ä»¥å…³æ³¨æˆ‘ä»¬åç»­çš„ [**å‰ç«¯å…±å­¦**](https://github.com/CreatorsDAO/front-end-co-learning)
:::

## é¡¹ç›®åˆ›å»º

é¡¹ç›®åˆ›å»ºå¯ä»¥ä½¿ç”¨ `React` æä¾›çš„ (create-react-app)[https://create-react-app.dev/]è„šæ‰‹æ¶ã€‚
æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä½¿ç”¨[vite](https://vitejs.dev/guide/) ä¸¤ç§æ–¹å¼æ¥å®Œæˆé¡¹ç›®çš„åˆå§‹åŒ–ã€‚

```shell
npx create-react-app my-app
pnpm create vite
```

ä½¿ç”¨ `vite`åˆå§‹åŒ–çš„æ—¶å€™ï¼Œè®°å¾—é€‰æ‹©`React`çš„ `Typescript` é¡¹ç›®ã€‚

:::tip
å¦‚æœä½ æ‡’å¾—æŠ˜è…¾æœ¬åœ°çš„ç¯å¢ƒï¼Œæˆ–è€…æƒ³æ‹¥æœ‰ä¸€ä¸ªéšæ—¶éšåœ°ç¼–è¾‘çš„äº‘ç«¯é¡¹ç›®ï¼Œä½ å¯ä»¥å°è¯• [stackblitz](https://stackblitz.com/), è¿™é‡Œæœ‰ä¸°å¯Œçš„å‰ç«¯èµ„æºã€‚
:::

## åŸºæœ¬ç»„ä»¶

é¡¹ç›®åˆå§‹åŒ–å®Œæˆåçš„æ–‡ä»¶å¤§ä½“ç»“æ„ç±»ä¼¼ï¼Œæˆ‘ä»¬æ‹¿ä¸€ä¸ª `vite` åˆ›å»ºçš„ react é¡¹ç›®ä¸¾ä¾‹ã€‚

```shell
.
â”œâ”€â”€ README.md
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”‚Â Â  â””â”€â”€ vite.svg
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ App.css
â”‚Â Â  â”œâ”€â”€ App.tsx
â”‚Â Â  â”œâ”€â”€ assets
â”‚Â Â  â”‚Â Â  â””â”€â”€ react.svg
â”‚Â Â  â”œâ”€â”€ index.css
â”‚Â Â  â”œâ”€â”€ main.tsx
â”‚Â Â  â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â””â”€â”€ vite.config.ts
```

src å†…éƒ¨ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªéšè—çš„ä¸»å…¥å£æ–‡ä»¶ è¿™é‡Œæ˜¯ main.tsx

```Typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

å¤§å¤šæ•° React é¡¹ç›®ä¾èµ–äºæ ¸å¿ƒç±»åº“`ReactDOM`,ä»–ä¹Ÿæ˜¯`React`æ¡†æ¶çš„ä¸€éƒ¨åˆ†ã€‚ App.tsx ä¸­å®šä¹‰è‡ªå·±çš„åº”ç”¨ç»„ä»¶ã€‚
é€šè¿‡ `ReactDOM.createRoot` åˆ›å»ºä¸€ä¸ª `React` ç»“æ„ï¼ŒæŠŠåç»­çš„ React ç»„ä»¶æŒ‚è½½åˆ° html dom ä¸­ï¼Œå®Œæˆ UI å±•ç¤ºã€‚

App ç»„ä»¶çš„ä»£ç åœ¨ App.tsx ä¸­

```Typescript
function App() {
  const [count, setCount] = useState(0)

  return (
    <>
      <div>
        <a href="https://vitejs.dev" target="_blank">
          <img src={viteLogo} className="logo" alt="Vite logo" />
        </a>
        <a href="https://react.dev" target="_blank">
          <img src={reactLogo} className="logo react" alt="React logo" />
        </a>
      </div>
      <h1>Vite + React</h1>
      <div className="card">
        <button onClick={() => setCount((count) => count + 1)}>
          count is {count}
        </button>
        <p>
          Edit <code>src/App.tsx</code> and save to test HMR
        </p>
      </div>
      <p className="read-the-docs">
        Click on the Vite and React logos to learn more
      </p>
    </>
  )
}

export default App
```

è¿™ä¸ªæ–‡ä»¶ é€šè¿‡ export å¯¹å¤–åˆ°å¤„ä¸€ä¸ª å‡½æ•°ç»„ä»¶ï¼Œè¿™ä¸ªå‡½æ•°ç»„ä»¶è¿”å›äº†ä¸€ä¸ª React Dom ç»“æ„ã€‚
ä½ åº”è¯¥çœ‹ç€å¾ˆçœ¼ç†Ÿï¼Œå†…éƒ¨åŸºæœ¬ä¸Šæ˜¯ç±»ä¼¼ HTML ä»£ç çš„æ¨¡ç‰ˆç»“æ„ã€‚

## ç»„ä»¶å‚æ•°

ç±»ä¼¼ä¸Šè¾¹ä»‹ç»çš„ App ç»„ä»¶ï¼Œä»–åœ¨ main.tsx ä¸­é€šè¿‡ HTML æ ‡ç­¾çš„æ–¹å¼ä½¿ç”¨ã€‚é‚£ä¹ˆæ€ä¹ˆä¼ é€’å‚æ•°å‘¢ï¼Ÿ
è¿™ä¸ªå‚æ•°æ”¾åœ¨å‡½æ•°å¼ç»„ä»¶çš„ç¬¬ä¸€ä¸ªå‚æ•° props,å¹¶ä¸”ä½ç½®ä¸å¯å˜ã€‚

```Typescript
function Example(props: any) {
  return (
    <p>{props.msg}</p>
  )
}

export default Example;
```

ä»¥ä¸Šå®šä¹‰äº†ä¸€ä¸ª Example ç»„ä»¶ï¼Œæ¥å—ä»»æ„ç±»å‹çš„å‚æ•°ã€‚

:::tip
Typescript ä¸­ç±»å‹ä¸å¥½æ ‡è¯†ï¼Œæˆ–è€…æ‡’å¾—è®¾ç½®çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ any ä»£æ›¿ã€‚ ğŸ˜„
:::

ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚æŒ‰éœ€å¼•å…¥ä»¥åï¼Œç›´æ¥ä½¿ç”¨ Example æ ‡ç­¾å³å¯ã€‚

```Typescript
<Example msg="hello world"/>
```

## ç»„ä»¶ hook

å‡½æ•°å¼ç»„ä»¶ï¼Œé€šè¿‡ useXXX çš„æ–¹å¼ï¼Œå¯ä»¥å®Œæˆäº‹ä»¶çš„ç›¸å…³ç»‘å®šã€‚

è¿™é‡Œä»‹ç»ä¸¤ä¸ªé‡è¦çš„ hook:

- [useState](https://legacy.reactjs.org/docs/hooks-state.html)

ç”¨æ¥åšç»„ä»¶å†…çš„çŠ¶æ€å­˜å‚¨ã€‚

```Typescript
function Example() {
  // Declare a new state variable, which we'll call "count"
  const [count, setCount] = useState(0);

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

useState æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œç”¨æ¥åšçŠ¶æ€æ•°æ®çš„åˆå§‹åŒ–ï¼Œè¿”å›ä¸¤ä¸ªå€¼ã€‚

1. ä¸€ä¸ªå€¼ä½œä¸ºå½“å‰ state çš„å˜é‡å(æ¯”å¦‚ä»¥ä¸Šçš„ count)ï¼Œå¯ä»¥æ³¨å…¥åˆ°è¿”å›çš„æ¨¡ç‰ˆä¸­ï¼Œä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚
2. å¦ä¸€ä¸ªæ˜¯çŠ¶æ€å˜æ›´çš„å›è°ƒ (æ¯”å¦‚ä»¥ä¸Šçš„ setCount) ,ç»„ä»¶ä¸­å¯é€šè¿‡äº‹ä»¶çš„å¤„ç†æ¯”å¦‚ onClick è°ƒç”¨å›è°ƒï¼Œæ”¹å˜ç»„ä»¶çŠ¶æ€ã€‚

- [useEffect](https://legacy.reactjs.org/docs/hooks-reference.html#useeffect)

è¿™ä¸ªç›¸å¯¹å¤æ‚ä¸€äº›ï¼Œæ ‡è¯†å½“å…³æ³¨çš„çŠ¶æ€å˜æ›´çš„æ—¶å€™æ‰§è¡Œçš„ä¸šåŠ¡é€»è¾‘ã€‚

```Typescript
function Example() {
  // Declare a new state variable, which we'll call "count"
  const [count, setCount] = useState(0);

  useEffect(function(){
    console.log(count);
  },[count])

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>
        Click me
      </button>
    </div>
  );
}
```

ä»¥ä¸Šçš„ä»£ç è¡¨ç¤ºï¼Œå½“çŠ¶æ€æ•°æ® count å˜æ›´çš„æ—¶å€™ï¼Œè§¦å‘æ‰§è¡Œçš„é€»è¾‘ã€‚
å¦‚æœå…³æ³¨çš„çŠ¶æ€ count ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºï¼Œåœ¨ç»„ä»¶åŠ è½½çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡ï¼Œå¯ä»¥ç†è§£ä¸º onloadã€‚

## è·¯ç”±ç»„ä»¶

React çš„ä¸€å¤§åœºæ™¯æ˜¯æ„å»º SPA åº”ç”¨(å•é¡µé¢åº”ç”¨)ã€‚è¿™æ—¶å€™ç»„ä»¶åˆ‡æ¢å³æˆä¸ºä¸€ä¸ªé—®é¢˜ã€‚æ¨èå¤§å®¶ä½¿ç”¨

[react router](https://reactrouter.com/en/main) æ¥å®Œæˆç»„ä»¶é—´çš„æ•°æ®åˆ‡æ¢ã€‚

## çŠ¶æ€ä¿å­˜

å•ç»„ä»¶çš„çŠ¶æ€å¯ä»¥ä½¿ç”¨ useState æ¥åšï¼Œè·¨ç»„ä»¶çŠ¶æ€æ¨èä½¿ç”¨ [jotai](https://jotai.org/) æ¥åšã€‚
